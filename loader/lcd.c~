/*******************************************************************************/
/* lcd.c: lcd controller configure file for Samsung S3C2440                    */
/*******************************************************************************/


/* Define register address about lcd controller */

#define LCDCON1 (*(volatile unsigned long*)0x4D000000) // lcd controller register 1
#define LCDCON2 (*(volatile unsigned long*)0x4D000004) // lcd controller register 2
#define LCDCON3 (*(volatile unsigned long*)0x4D000008) // lcd controller register 3
#define LCDCON4 (*(volatile unsigned long*)0x4D00000C) // lcd controller register 4
#define LCDCON5 (*(volatile unsigned long*)0x4D000010) // lcd controller register 5

#define LCDSADDR1 (*(volatile unsigned long*)0x4D000014) // 帧缓冲开始地址寄存器 1
#define LCDSADDR2 (*(volatile unsigned long*)0x4D000018) // 帧缓冲开始地址寄存器 2
#define LCDSADDR3 (*(volatile unsigned long*)0x4D00001C) // 虚拟屏地址设置

#define REDLUT (*(volatile unsigned long*)0x4D000020) // 红色查找表寄存器
#define GREENLUT (*(volatile unsigned long*)0x4D000024) // 绿色查找表寄存器
#define BLUELUT (*(volatile unsigned long*)0x4D000028) // 蓝色查找表寄存器

#define DITHMODE (*(volatile unsigned long*)0x4D00004C) // 抖动模式寄存器(STN屏)
#define TPAL (*(volatile unsigned long*)0x4D000050) // 临时调色板寄存器(TFT屏)

#define LCDINTPND (*(volatile unsigned long*)0x4D000054) // LCD 中断挂起寄存器
#define LCDSRCPND (*(volatile unsigned long*)0x4D000058) // LCD 源挂起寄存器
#define LCDINTMSK (*(volatile unsigned long*)0x4D00005C) // LCD 中断屏蔽寄存器
#define TCONSEL (*(volatile unsigned long*)0x4D000060) // TCON 控制寄存器


/* Values of lcd controller register */

// LCDCON1 的设置参数
#define LCD_CLK_Val 9 // 手册P298，该参数决定了 VCLK 的频率
#define LCD_PNRMODE_Val 3 // 显示模式选择为 TFT LCD
#define LCD_BPPMODE_Val 13 // BPP（位每像素）模式：TFT的24bpp

// LCDCON2 的设置参数
#define LCD_VBPD_Val (15-1) // 垂直同步信号后肩（数据通过查询 LCD 屏的手册得知）
#define LCD_LINE_Val (240-1) // 垂直尺寸（数据通过查询 LCD 屏的手册得知）
#define LCD_VFPD_Val (12-1) // 垂直同步信号前肩（数据通过查询 LCD 屏的手册得知）
#define LCD_VSPW_Val (3-1) // 垂直同步信号脉宽（数据通过查询 LCD 屏的手册得知）

// LCDCON3 的设置参数
#define LCD_HBPD_Val (38-1) // 水平同步信号后肩（数据通过查询 LCD 屏的手册得知）
#define LCD_HOZ_Val (320-1) // 水平尺寸（数据通过查询 LCD 屏的手册得知）
#define LCD_HFPD_Val (20-1) // 水平同步信号前肩（数据通过查询 LCD 屏的手册得知）

// LCDCON4 的设置参数
#define LCD_HSPW (30-1) // 水平同步信号脉宽（数据通过查询 LCD 屏的手册得知）

// LCDCON5 的设置参数
#define LCDCON5_Val 0x0000000F // 手册P300


/* Function: Setup lcd controller for S3C2440 */

void LCD_init()
{
  LCDCON1 = (LCD_CLK_Val << 8) | (0 << 7) | (LCD_PNRMODE_Val << 5) | (LCD_BPPMODE_Val << 1) | 0;
  LCDCON2 = (LCD_VBPD_Val << 24) | (LCD_LINE_Val << 14) | (LCD_VFPD_Val << 6) | LCD_VSPW_Val;
  LCDCON3 = (LCD_HBPD_Val << 19) | (LCD_HOZ_Val << 8) | LCD_HFPD;
  LCDCON4 = LCD_HSPW_Val;
  LCDCON5 = LCDCON5_Val;

  
}
